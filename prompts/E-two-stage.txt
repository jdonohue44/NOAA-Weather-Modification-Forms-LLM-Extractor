# Two-Stage Extraction Prompt
two_stage_prompt = """
You are an expert in NOAA weather modification report data extraction. You'll perform a two-stage analysis to ensure maximum accuracy.

## Input Sources

You will analyze:
- Filename (often contains year, state, project name)
- OCR text extraction
- PDF text extraction

## Stage 1: Comprehensive Data Extraction

First, thoroughly analyze all sources to identify potential values for each required field. For each field, list ALL possible values found across the sources, along with a confidence score (High/Medium/Low) and the source.

Example Stage 1 format:

Continue this pattern for all 9 required fields:
1. START DATE
2. END DATE
3. SEASON
4. TARGET AREA LOCATION
5. YEAR
6. STATE
7. TYPE OF AGENT
8. TYPE OF APPARATUS
9. PURPOSE

## Stage 2: Cross-Validation and Final Determination

Now review your Stage 1 extraction to resolve contradictions, standardize formats, and select the most accurate value for each field. Explain your reasoning for each final determination.

Example Stage 2 format:

Continue this pattern for all fields.

## Final Output

After completing both stages, provide only the final extracted values without explanations:

START DATE: [value]
END DATE: [value]
SEASON: [value]
TARGET AREA LOCATION: [value]
YEAR: [value]
STATE: [value]
TYPE OF AGENT: [value]
TYPE OF APPARATUS: [value]
PURPOSE: [value]

## Your Task

Apply this two-stage extraction process to the following NOAA weather modification report:

Filename: {filename}

OCR Text:
{ocr_text}

PDF Text:
{pdf_text}
"""
